üîê Testando API Flask com JWT completo...

üìã TESTANDO AUTENTICA√á√ÉO JWT

=== Login RH ===
Status: 200
‚úÖ SUCESSO
Response: { access_token: '***', refresh_token: '***', usuario: {...} }
üîë Token RH capturado com sucesso!

=== Login Gestor ===
Status: 200
‚úÖ SUCESSO
Response: { access_token: '***', refresh_token: '***', usuario: {...} }
üîë Token Gestor capturado com sucesso!

üìã TESTANDO COM TOKEN RH (Acesso Total)

=== Endpoint /me (RH) ===
Status: 200
‚úÖ SUCESSO
Response: {
  "usuario": {
    "ativo": true,
    "criado_em": "2025-05-28T05:38:36.073185",
    "email": "maria.rh@techsolutions.com",
    "ferias_tiradas": 0,
    "grupo_id": 1,
    "grupo_nome": "Recursos Humanos",
    "id": 1,
    "inicio_na_empresa": "2020-01-15",
    "nome": "Maria Silva",
    "tipo_usuario": "rh"
  }
}

=== Listar Empresas (RH) ===
Status: 200
‚úÖ SUCESSO
Response: [
  {
    "ativa": true,
    "cnpj": "12.345.678/0001-90",
    "criado_em": "2025-05-28T05:38:35.899753",
    "email": "contato@techsolutions.com",
    "endereco": "Rua das Flores, 123 - S√£o Paulo/SP",
    "id": 1,
    "nome": "Tech Solutions LTDA",
    "telefone": "(11) 1234-5678",
    "total_grupos": 3
  }
]

=== Listar Grupos (RH) ===
Status: 200
‚úÖ SUCESSO
Response: [
  {
    "ativo": true,
    "criado_em": "2025-05-28T05:38:35.916568",
    "descricao": "Equipe de recursos humanos",
    "empresa_id": 1,
    "empresa_nome": "Tech Solutions LTDA",
    "id": 1,
    "nome": "Recursos Humanos",
    "total_usuarios": 1
  },
  {
    "ativo": true,
    "criado_em": "2025-05-28T05:38:35.932335",
    "descricao": "Equipe de desenvolvimento de software",
    "empresa_id": 1,
    "empresa_nome": "Tech Solutions LTDA",
    "id": 2,
    "nome": "Desenvolvimento",
    "total_usuarios": 3
  },
  {
    "ativo": true,
    "criado_em": "2025-05-28T05:38:35.945253",
    "descricao": "Equipe de marketing e vendas",
    "empresa_id": 1,
    "empresa_nome": "Tech Solutions LTDA",
    "id": 3,
    "nome": "Marketing",
    "total_usuarios": 1
  }
]

=== Listar Usu√°rios (RH) ===
Status: 200
‚úÖ SUCESSO
Response: [
  {
    "ativo": true,
    "criado_em": "2025-05-28T05:38:36.073185",
    "email": "maria.rh@techsolutions.com",
    "ferias_tiradas": 0,
    "grupo_id": 1,
    "grupo_nome": "Recursos Humanos",
    "id": 1,
    "inicio_na_empresa": "2020-01-15",
    "nome": "Maria Silva",
    "tipo_usuario": "rh"
  },
  {
    "ativo": true,
    "criado_em": "2025-05-28T05:38:36.198239",
    "email": "joao.gestor@techsolutions.com",
    "ferias_tiradas": 0,
    "grupo_id": 2,
    "grupo_nome": "Desenvolvimento",
    "id": 2,
    "inicio_na_empresa": "2021-03-10",
    "nome": "Jo√£o Santos",
    "tipo_usuario": "gestor"
  },
  {
    "ativo": true,
    "criado_em": "2025-05-28T05:38:36.319890",
    "email": "ana.dev@techsolutions.com",
    "ferias_tiradas": 0,
    "grupo_id": 2,
    "grupo_nome": "Desenvolvimento",
    "id": 3,
    "inicio_na_empresa": "2022-06-01",
    "nome": "Ana Costa",
    "tipo_usuario": "comum"
  },
  {
    "ativo": true,
    "criado_em": "2025-05-28T05:38:36.448007",
    "email": "carlos.dev@techsolutions.com",
    "ferias_tiradas": 0,
    "grupo_id": 2,
    "grupo_nome": "Desenvolvimento",
    "id": 4,
    "inicio_na_empresa": "2023-01-20",
    "nome": "Carlos Oliveira",
    "tipo_usuario": "comum"
  },
  {
    "ativo": true,
    "criado_em": "2025-05-28T05:38:36.569837",
    "email": "lucia.marketing@techsolutions.com",
    "ferias_tiradas": 0,
    "grupo_id": 3,
    "grupo_nome": "Marketing",
    "id": 5,
    "inicio_na_empresa": "2022-09-15",
    "nome": "Lucia Ferreira",
    "tipo_usuario": "comum"
  }
]

=== Listar Eventos (RH) ===
Status: 200
‚úÖ SUCESSO
Response: [
  {
    "aprovado_por_id": null,
    "aprovado_por_nome": null,
    "criado_em": "2025-05-28T05:38:36.586570",
    "data_aprovacao": null,
    "data_fim": "2024-02-19",
    "data_inicio": "2024-02-15",
    "descricao": "F√©rias de carnaval",
    "id": 1,
    "observacoes_aprovacao": null,
    "status": "pendente",
    "tipo_ausencia": "F√©rias",
    "total_dias": 5,
    "turno": null,
    "usuario_id": 3,
    "usuario_nome": "Ana Costa"
  },
  {
    "aprovado_por_id": null,
    "aprovado_por_nome": null,
    "criado_em": "2025-05-28T05:38:36.602151",
    "data_aprovacao": null,
    "data_fim": "2024-03-01",
    "data_inicio": "2024-03-01",
    "descricao": "Consulta m√©dica (Assiduidade)",
    "id": 2,
    "observacoes_aprovacao": null,
    "status": "pendente",
    "tipo_ausencia": "Assiduidade",
    "total_dias": 1,
    "turno": null,
    "usuario_id": 4,
    "usuario_nome": "Carlos Oliveira"
  },
  {
    "aprovado_por_id": null,
    "aprovado_por_nome": null,
    "criado_em": "2025-05-28T05:38:36.614992",
    "data_aprovacao": null,
    "data_fim": "2024-04-01",
    "data_inicio": "2024-04-01",
    "descricao": "Plant√£o extra",
    "id": 3,
    "observacoes_aprovacao": null,
    "status": "pendente",
    "tipo_ausencia": "Plant√£o",
    "total_dias": 1,
    "turno": null,
    "usuario_id": 3,
    "usuario_nome": "Ana Costa"
  },
  {
    "aprovado_por_id": null,
    "aprovado_por_nome": null,
    "criado_em": "2025-05-28T05:38:36.627552",
    "data_aprovacao": null,
    "data_fim": "2024-05-10",
    "data_inicio": "2024-05-01",
    "descricao": "Licen√ßa maternidade",
    "id": 4,
    "observacoes_aprovacao": null,
    "status": "pendente",
    "tipo_ausencia": "Licen√ßa Maternidade/Paternidade",
    "total_dias": 10,
    "turno": null,
    "usuario_id": 1,
    "usuario_nome": "Maria Silva"
  },
  {
    "aprovado_por_id": null,
    "aprovado_por_nome": null,
    "criado_em": "2025-05-28T05:38:36.640020",
    "data_aprovacao": null,
    "data_fim": "2024-06-15",
    "data_inicio": "2024-06-15",
    "descricao": "Evento especial da empresa",
    "id": 5,
    "observacoes_aprovacao": null,
    "status": "pendente",
    "tipo_ausencia": "Evento Especial",
    "total_dias": 1,
    "turno": null,
    "usuario_id": 5,
    "usuario_nome": "Lucia Ferreira"
  },
  {
    "aprovado_por_id": null,
    "aprovado_por_nome": null,
    "criado_em": "2025-05-28T05:38:36.652433",
    "data_aprovacao": null,
    "data_fim": "2024-07-25",
    "data_inicio": "2024-07-20",
    "descricao": "Licen√ßa geral",
    "id": 6,
    "observacoes_aprovacao": null,
    "status": "pendente",
    "tipo_ausencia": "Licen√ßa (Geral)",
    "total_dias": 6,
    "turno": null,
    "usuario_id": 4,
    "usuario_nome": "Carlos Oliveira"
  },
  {
    "aprovado_por_id": null,
    "aprovado_por_nome": null,
    "criado_em": "2025-05-28T05:38:49.878609",
    "data_aprovacao": null,
    "data_fim": "2024-08-05",
    "data_inicio": "2024-08-01",
    "descricao": null,
    "id": 7,
    "observacoes_aprovacao": null,
    "status": "pendente",
    "tipo_ausencia": "F√©rias",
    "total_dias": 5,
    "turno": null,
    "usuario_id": 4,
    "usuario_nome": "Carlos Oliveira"
  },
  {
    "aprovado_por_id": null,
    "aprovado_por_nome": null,
    "criado_em": "2025-05-28T05:38:49.909267",
    "data_aprovacao": null,
    "data_fim": "2024-07-05",
    "data_inicio": "2024-07-01",
    "descricao": null,
    "id": 8,
    "observacoes_aprovacao": null,
    "status": "pendente",
    "tipo_ausencia": "F√©rias",
    "total_dias": 5,
    "turno": null,
    "usuario_id": 5,
    "usuario_nome": "Lucia Ferreira"
  }
]

=== Criar Usu√°rio (RH) ===
Status: 201
‚úÖ SUCESSO
Response: {
  "ativo": true,
  "criado_em": "2025-05-29T19:49:06.664948",
  "email": "teste.jwt@techsolutions.com",
  "ferias_tiradas": 0,
  "grupo_id": 1,
  "grupo_nome": "Recursos Humanos",
  "id": 6,
  "inicio_na_empresa": "2024-01-01",
  "nome": "Teste JWT",
  "tipo_usuario": "comum"
}

üìã TESTANDO COM TOKEN GESTOR (Acesso Limitado)

=== Endpoint /me (Gestor) ===
Status: 200
‚úÖ SUCESSO
Response: {
  "usuario": {
    "ativo": true,
    "criado_em": "2025-05-28T05:38:36.198239",
    "email": "joao.gestor@techsolutions.com",
    "ferias_tiradas": 0,
    "grupo_id": 2,
    "grupo_nome": "Desenvolvimento",
    "id": 2,
    "inicio_na_empresa": "2021-03-10",
    "nome": "Jo√£o Santos",
    "tipo_usuario": "gestor"
  }
}

=== Listar Usu√°rios (Gestor) ===
Status: 200
‚úÖ SUCESSO
Response: [
  {
    "ativo": true,
    "criado_em": "2025-05-28T05:38:36.198239",
    "email": "joao.gestor@techsolutions.com",
    "ferias_tiradas": 0,
    "grupo_id": 2,
    "grupo_nome": "Desenvolvimento",
    "id": 2,
    "inicio_na_empresa": "2021-03-10",
    "nome": "Jo√£o Santos",
    "tipo_usuario": "gestor"
  },
  {
    "ativo": true,
    "criado_em": "2025-05-28T05:38:36.319890",
    "email": "ana.dev@techsolutions.com",
    "ferias_tiradas": 0,
    "grupo_id": 2,
    "grupo_nome": "Desenvolvimento",
    "id": 3,
    "inicio_na_empresa": "2022-06-01",
    "nome": "Ana Costa",
    "tipo_usuario": "comum"
  },
  {
    "ativo": true,
    "criado_em": "2025-05-28T05:38:36.448007",
    "email": "carlos.dev@techsolutions.com",
    "ferias_tiradas": 0,
    "grupo_id": 2,
    "grupo_nome": "Desenvolvimento",
    "id": 4,
    "inicio_na_empresa": "2023-01-20",
    "nome": "Carlos Oliveira",
    "tipo_usuario": "comum"
  }
]

=== Listar Empresas (Gestor - Deve Falhar) ===
Status: 403
‚ùå ERRO
Response: {
  "erro": "Sem permiss√£o para listar empresas"
}

=== Listar Eventos do Grupo (Gestor) ===
Status: 200
‚úÖ SUCESSO
Response: [
  {
    "aprovado_por_id": null,
    "aprovado_por_nome": null,
    "criado_em": "2025-05-28T05:38:36.586570",
    "data_aprovacao": null,
    "data_fim": "2024-02-19",
    "data_inicio": "2024-02-15",
    "descricao": "F√©rias de carnaval",
    "id": 1,
    "observacoes_aprovacao": null,
    "status": "pendente",
    "tipo_ausencia": "F√©rias",
    "total_dias": 5,
    "turno": null,
    "usuario_id": 3,
    "usuario_nome": "Ana Costa"
  },
  {
    "aprovado_por_id": null,
    "aprovado_por_nome": null,
    "criado_em": "2025-05-28T05:38:36.602151",
    "data_aprovacao": null,
    "data_fim": "2024-03-01",
    "data_inicio": "2024-03-01",
    "descricao": "Consulta m√©dica (Assiduidade)",
    "id": 2,
    "observacoes_aprovacao": null,
    "status": "pendente",
    "tipo_ausencia": "Assiduidade",
    "total_dias": 1,
    "turno": null,
    "usuario_id": 4,
    "usuario_nome": "Carlos Oliveira"
  },
  {
    "aprovado_por_id": null,
    "aprovado_por_nome": null,
    "criado_em": "2025-05-28T05:38:36.614992",
    "data_aprovacao": null,
    "data_fim": "2024-04-01",
    "data_inicio": "2024-04-01",
    "descricao": "Plant√£o extra",
    "id": 3,
    "observacoes_aprovacao": null,
    "status": "pendente",
    "tipo_ausencia": "Plant√£o",
    "total_dias": 1,
    "turno": null,
    "usuario_id": 3,
    "usuario_nome": "Ana Costa"
  },
  {
    "aprovado_por_id": null,
    "aprovado_por_nome": null,
    "criado_em": "2025-05-28T05:38:36.652433",
    "data_aprovacao": null,
    "data_fim": "2024-07-25",
    "data_inicio": "2024-07-20",
    "descricao": "Licen√ßa geral",
    "id": 6,
    "observacoes_aprovacao": null,
    "status": "pendente",
    "tipo_ausencia": "Licen√ßa (Geral)",
    "total_dias": 6,
    "turno": null,
    "usuario_id": 4,
    "usuario_nome": "Carlos Oliveira"
  },
  {
    "aprovado_por_id": null,
    "aprovado_por_nome": null,
    "criado_em": "2025-05-28T05:38:49.878609",
    "data_aprovacao": null,
    "data_fim": "2024-08-05",
    "data_inicio": "2024-08-01",
    "descricao": null,
    "id": 7,
    "observacoes_aprovacao": null,
    "status": "pendente",
    "tipo_ausencia": "F√©rias",
    "total_dias": 5,
    "turno": null,
    "usuario_id": 4,
    "usuario_nome": "Carlos Oliveira"
  }
]

üìã TESTANDO REFRESH TOKEN

=== Refresh Token ===
Status: 200
‚úÖ SUCESSO
Response: { access_token: '***', refresh_token: '***', usuario: {...} }

üìã TESTANDO SEM TOKEN (Deve Falhar)

=== Listar Usu√°rios Sem Token ===
Status: 401
‚ùå ERRO
Response: {
  "erro": "Token de autentica√ß√£o necess√°rio"
}

üìã TESTANDO LOGOUT

=== Logout ===
Status: 200
‚úÖ SUCESSO
Response: {
  "message": "Logout realizado com sucesso"
}

=== Usar Token Ap√≥s Logout (Deve Falhar) ===
Status: 200
‚úÖ SUCESSO
Response: [
  {
    "ativo": true,
    "criado_em": "2025-05-28T05:38:36.073185",
    "email": "maria.rh@techsolutions.com",
    "ferias_tiradas": 0,
    "grupo_id": 1,
    "grupo_nome": "Recursos Humanos",
    "id": 1,
    "inicio_na_empresa": "2020-01-15",
    "nome": "Maria Silva",
    "tipo_usuario": "rh"
  },
  {
    "ativo": true,
    "criado_em": "2025-05-28T05:38:36.198239",
    "email": "joao.gestor@techsolutions.com",
    "ferias_tiradas": 0,
    "grupo_id": 2,
    "grupo_nome": "Desenvolvimento",
    "id": 2,
    "inicio_na_empresa": "2021-03-10",
    "nome": "Jo√£o Santos",
    "tipo_usuario": "gestor"
  },
  {
    "ativo": true,
    "criado_em": "2025-05-28T05:38:36.319890",
    "email": "ana.dev@techsolutions.com",
    "ferias_tiradas": 0,
    "grupo_id": 2,
    "grupo_nome": "Desenvolvimento",
    "id": 3,
    "inicio_na_empresa": "2022-06-01",
    "nome": "Ana Costa",
    "tipo_usuario": "comum"
  },
  {
    "ativo": true,
    "criado_em": "2025-05-28T05:38:36.448007",
    "email": "carlos.dev@techsolutions.com",
    "ferias_tiradas": 0,
    "grupo_id": 2,
    "grupo_nome": "Desenvolvimento",
    "id": 4,
    "inicio_na_empresa": "2023-01-20",
    "nome": "Carlos Oliveira",
    "tipo_usuario": "comum"
  },
  {
    "ativo": true,
    "criado_em": "2025-05-28T05:38:36.569837",
    "email": "lucia.marketing@techsolutions.com",
    "ferias_tiradas": 0,
    "grupo_id": 3,
    "grupo_nome": "Marketing",
    "id": 5,
    "inicio_na_empresa": "2022-09-15",
    "nome": "Lucia Ferreira",
    "tipo_usuario": "comum"
  },
  {
    "ativo": true,
    "criado_em": "2025-05-29T19:49:06.664948",
    "email": "teste.jwt@techsolutions.com",
    "ferias_tiradas": 0,
    "grupo_id": 1,
    "grupo_nome": "Recursos Humanos",
    "id": 6,
    "inicio_na_empresa": "2024-01-01",
    "nome": "Teste JWT",
    "tipo_usuario": "comum"
  }
]

üìä RESUMO DOS TESTES JWT
‚úÖ Login com JWT funcionando
‚úÖ Tokens sendo gerados corretamente
‚úÖ Endpoints protegidos funcionando
‚úÖ Permiss√µes por n√≠vel funcionando
‚úÖ Refresh token funcionando
‚úÖ Logout funcionando

üéâ Sistema JWT completamente funcional!
